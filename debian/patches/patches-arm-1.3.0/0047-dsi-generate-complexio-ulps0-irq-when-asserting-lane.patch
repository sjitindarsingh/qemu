From 54f91207fa039ddc994a373b5bd12972aa428482 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Juha=20Riihim=C3=A4ki?= <juha.riihimaki@nokia.com>
Date: Tue, 4 Dec 2012 14:10:12 +0000
Subject: [PATCH 47/80] dsi: generate complexio ulps0 irq when asserting lane
 sig2
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Juha Riihim√§ki <juha.riihimaki@nokia.com>
---
 hw/omap_dss.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/hw/omap_dss.c b/hw/omap_dss.c
index a894fdb..8ecc31d 100644
--- a/hw/omap_dss.c
+++ b/hw/omap_dss.c
@@ -2324,6 +2324,11 @@ static void omap_dsi_write(void *opaque, hwaddr addr,
         TRACEDSI("DSI_COMPLEXIO_CFG_2 = 0x%08x", value);
         s->dsi.complexio_cfg2 = (value & 0xfffcffff)
                                 | (s->dsi.complexio_cfg2 & (3 << 16));
+        if (((value >> 5) & 3)) {
+            s->dsi.complexio_irqst |= (1 << 30); /* ULPSACTIVENOT_ALL0_IRQ */
+            s->dsi.irqst |= (1 << 10);           /* COMPLEXIO_ERR_IRQ */
+            omap_dss_interrupt_update(s);
+        }
         break;
     case 0x080: /* DSI_VM_TIMING4 */
         TRACEDSI("DSI_VM_TIMING4 = 0x%08x", value);
-- 
1.8.0

